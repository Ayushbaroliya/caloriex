<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
</head>
<style>
 .gauge-wrapper {
    position: relative;
    width: 300px;
    height: 150px; /* Half of width for a semi-circle */
    margin: 50px auto;
    overflow: hidden; /* Hides the bottom half of the rotation */
}

/* The colored background arc */
.gauge-body {
    position: absolute;
    width: 100%;
    height: 200%; /* Double height to make a full circle, we hide half */
    background: conic-gradient(
        from 270deg,      /* Start at the left */
        #3498db 0deg 40deg,   /* Blue (Underweight) */
        #2ecc71 40deg 90deg,  /* Green (Normal) */
        #f1c40f 90deg 130deg, /* Yellow (Overweight) */
        #e74c3c 130deg 180deg /* Red (Obese) */
    );
    border-radius: 50%;
}


.gauge-cover {
    position: absolute;
    top: 25%;
    left: 25%;
    width: 50%;
    height: 50%;
    background: white;
    border-radius: 50%;
    z-index: 10;
}


.needle {
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 4px;
    height: 140px; 
    background: #333;
    transform-origin: bottom center; 
    transform: rotate(-90deg); 
    transition: transform 0.5s ease-out; 
    z-index: 20;
}

.needle::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: -5px;
    width: 14px;
    height: 14px;
    background: #333;
    border-radius: 50%;
}
</style>
<body>
<div class="gauge-wrapper">
    <div class="gauge-body">
        <div class="gauge-fill"></div>
        <div class="gauge-cover"></div> </div>

    <div class="needle" id="bmiNeedle"></div>
    
    <div class="bmi-text" id="bmiValueText">0.0</div>
</div>
<script>function setGaugeValue(bmi) {
    const needle = document.getElementById('bmiNeedle');
    
    // 1. Define limits
    const minBMI = 0;
    const maxBMI = 40;
    const minAngle = -90; // Far left
    const maxAngle = 90;  // Far right

    // 2. Clamp the BMI (so the needle doesn't spin 360 degrees on crazy inputs)
    if (bmi < minBMI) bmi = minBMI;
    if (bmi > maxBMI) bmi = maxBMI;

    // 3. The Math: Map BMI to Degrees
    // Formula: ((Value - Min) * (Range of Angle / Range of Value)) + Start Angle
    const angleRange = maxAngle - minAngle; // 180 degrees
    const valueRange = maxBMI - minBMI;     // 40 points
    
    const rotation = ((bmi - minBMI) * (angleRange / valueRange)) + minAngle;

    // 4. Apply rotation
    needle.style.transform = `rotate(${rotation}deg)`;
    
    // Optional: Update text
    document.getElementById('bmiValueText').textContent = bmi.toFixed(1);
}

// EXAMPLE: Test it inside your form listener
// setGaugeValue(22.5); // Should point straight up (Green zone)</script>
</body>
</html>